name: deon
scopeName: source.deon
patterns:
  - include: '#core'
repository:
  core:
    patterns:
      - include: '#general'
      - include: '#curly'
      # - include: '#square'
  general:
    patterns:
      - match: '^(import) (\w+) (from) (.+)$'
        captures:
          1:
            name: entity.name.function.deon
          2:
            name: variable.other.constant.deon
          3:
            name: entity.name.function.deon
          4:
            name: variable.other.constant.deon
      - match: '^(\w+)' # root key
        captures:
          1:
            name: variable.other.property.deon
      - match: (\'(.+)\')\s(\[|\{|\w+|\') # string key
        captures:
          1:
            name: variable.other.property.deon
      - match: '(#.+)\b' # link
        captures:
          1:
            name: storage.type.struct
      - match: '\/\/.+'
        name: comment.deon
      - match: '^(\/\*\*(.+)?)|((\s+)?\*(.+)?\/?)'
        name: comment.deon
  'curly-keywords':
    patterns:
      - match: '^\s+(\w+)' # key
        captures:
          1:
            name: variable.other.property.deon
  # 'square-keywords':
  #   patterns:
  #     - match: '^(\.+)$' # value
  #       captures:
  #         1:
  #           name: variable.other.property.deon
  curly:
    begin: '{'
    end: '}'
    beginCaptures:
      0:
        name: punctuation.paren.open
    endCaptures:
      0:
        name: punctuation.paren.close
    name: expression.group
    patterns:
      - include: '#general'
      - include: '#curly-keywords'
  # square:
  #   begin: '['
  #   end: ']'
  #   beginCaptures:
  #     0:
  #       name: punctuation.paren.open
  #   endCaptures:
  #     0:
  #       name: punctuation.paren.close
  #   name: expression.group
  #   patterns:
  #     - include: '#general'
  #     # - include: '#square-keywords'
